[gd_scene load_steps=6 format=2]

[ext_resource path="res://Sprites/gui/Loading.png" type="Texture" id=1]
[ext_resource path="res://LabelStyles/Maintext.tres" type="Theme" id=2]

[sub_resource type="Shader" id=1]
code = "shader_type canvas_item;

uniform vec4 fore_color : hint_color = vec4(0.5, 0.75, 1.0, 1.0);
uniform vec4 back_color : hint_color = vec4(1.0, 1.0, 1.0, 1.0);

void fragment()
{
	float aspect = (1.0 / TEXTURE_PIXEL_SIZE).y/(1.0 / TEXTURE_PIXEL_SIZE).x;
	float value;
	vec2 uv = UV.xy / (1.0 / TEXTURE_PIXEL_SIZE).x;
	uv -= vec2(0.5, 0.5*aspect);
	float rot = radians(45.0); // radians(45.0*sin(iTime));
	vec2 part1 = vec2(cos(rot), -sin(rot));
	vec2 part2 = vec2(sin(rot), cos(rot));
	mat2 m = mat2(part1, part2);
	uv = m * uv;
	uv += vec2(0.5, 0.5*aspect);
	uv.y+=0.5*(1.0-aspect);
	vec2 pos = 10.0*uv;
	vec2 rep = fract(pos);
	float dist = 2.0*min(min(rep.x, 1.0-rep.x), min(rep.y, 1.0-rep.y));
	float squareDist = length((floor(pos)+vec2(0.5)) - vec2(5.0) );
	float edge = sin(TIME-squareDist*0.5)*0.5+0.5;
	edge = (TIME-squareDist*0.5)*0.5;
	edge = 2.0*fract(edge*0.5);
	value = fract (dist*2.0);
	value = mix(value, 1.0-value, step(1.0, edge));
	edge = pow(abs(1.0-edge), 2.0);
	value = smoothstep( edge-0.05, edge, 0.95*value);
	value += squareDist*.1;
	COLOR = mix(back_color, fore_color, value);
	//COLOR.a = 0.25*clamp(value, 0.0, 1.0);
}"

[sub_resource type="ShaderMaterial" id=2]
shader = SubResource( 1 )
shader_param/fore_color = Color( 0.0235294, 0.0313726, 0.647059, 1 )
shader_param/back_color = Color( 0, 0.54902, 1, 1 )

[sub_resource type="GDScript" id=5]
script/source = "extends CanvasLayer

var rng = RandomNumberGenerator.new()
var txt = rng.randi_range(0, 8)


# Called when the node enters the scene tree for the first time.
func _ready():
	#print_debug(txt)
	rng.randomize()
	txt = rng.randi_range(0, 8)
	pass # Replace with function body.


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(_delta):
	match(txt):
		0:
			$Label.text = \"Jump out of a grounded dash \\nto perform vector air!\"
		1:
			$Label.text = \"The air dash's trajectory \\ncan be curved at any time!\"
		2:
			$Label.text = \"Wanna get those X ranks? \\nPlay for points and do it fast!\"
		3:
			$Label.text = \"Come across a mysterious looking portal? \\nJump in and you may have a \\nchance for a soul bolt!\"
		4:
			$Label.text = \"Your chain counter goes up the more you \\nkill enemies without getting hit! \\nThat gives you a lot of points!\"
		5:
			$Label.text = \"Your dash doubles as a dodge. \\nDon't be afraid to go ham when you're in a \\nsticky situation!\"
		6:
			$Label.text = \"Collecting pieces rapidly gives you \\nan extra bonus! \\nlook out for these when looking \\nto get that X rank!\"
		7:
			$Label.text = \"Press A to jump :)\"
		8:
			$Label.text = \"You can use the air dash to \\ncorrect vector air in any direction.\"

#	pass
"

[node name="LOAD" type="CanvasLayer"]
layer = 11

[node name="ColorRect" type="ColorRect" parent="."]
material = SubResource( 2 )
margin_right = 767.0
margin_bottom = 437.0

[node name="Sprite" type="Sprite" parent="ColorRect"]
z_index = 1
texture = ExtResource( 1 )
centered = false

[node name="CanvasLayer" type="CanvasLayer" parent="ColorRect"]
layer = 17
script = SubResource( 5 )

[node name="Label" type="Label" parent="ColorRect/CanvasLayer"]
modulate = Color( 0.545098, 0.647059, 1, 1 )
margin_left = 475.0
margin_top = 332.0
margin_right = 766.0
margin_bottom = 431.0
theme = ExtResource( 2 )
text = "Hinty hint!!!! you can win the game by
JUST FUCKING WINNING IT! YOU CAN DO IT!
JUST do it. you'll fucking win I promise
@$%)*^$^*)%$^*^!"
align = 1
valign = 1

[node name="continueLabel" type="Label" parent="ColorRect"]
visible = false
margin_left = 1.34592
margin_top = 396.941
margin_right = 260.346
margin_bottom = 433.941
theme = ExtResource( 2 )
text = "Press jump to continue!"
align = 1
valign = 1
